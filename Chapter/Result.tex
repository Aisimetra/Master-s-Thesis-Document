

\chapter{Result}

At the end of the pipeline, has been computed a respiratory rate per minute (rpm), for each position of both conditions (normal bed and rocking bed). This number is obtained as the average of the number of peaks of the channels with the highest confidence that outstrip the value of confidence set as a minimum, at the beginning of the pipeline, to accept the channels, as discussed in Chapter \ref{cap:computeRespiratory}. 

The following section \ref{cap:metrics} presented the metric used to asset the error between the estimated rpm resulting from the pipeline and the one given by the ground truth. These metrics are commonly employed to determine the difference between medical instruments    \cite{Hunt2015IdentificationExercise,HoogAntink2020BallistocardiographyIntervention, Sadek2020AStudy}.
To assert better how the pipeline works, it also shows visually the raw data of the channel with the highest confidence, his reconstruction or filtering and nasal pressure at that moment.

The results are divided into the different combinations of approaches and methods applied to the different positions and conditions.
The result for the following combination can be found in the section:
\begin{itemize}
  \item section \ref*{cap:ResultMODWTRAB}: Multiresolution Overlap Discrete Wavelet Transform \\ (MODWTMRA) with binary approach.
  \item section \ref*{cap:ResultMODWTRAW}: MMultiresolution Overlap Discrete Wavelet Transform \\ (MODWTMRA) with weighted approach
  \item section \ref*{cap:ResultSGB}: Savitzky–Golay filter with binary approach
  \item section \ref*{cap:ResultSGW}: Savitzky–Golay filter with weighted approach   
\end{itemize}



\section{Evaluation Metrics} \label{cap:metrics}
To evaluate the result of the pipeline has been chosen metrics that are on the same scale as the target prediction. This decision has been done to preserve the scale and has an estimation of the difference based on the number of breaths per minute, in our result from the actual value.
The chosen evaluation metrics are: Mean absolute error (MAE), discussed in section \ref{cap:mae} and Mean absolute percentage error (MAPE), discussed in section \ref{cap:mape} %and Root Mean Square Error (RMSE), discussed in section \ref{cap:rmse}.


\subsection{Mean absolute error} \label{cap:mae}
Mean Absolute Error (MAE) is the average absolute error between actual and predicted values.  It is a measure of model accuracy given on the same scale as the prediction target, it can be seen as the average error that the model's prediction has in comparison with their corresponding actual targets.

\vspace{0.5cm}

$$MAE = \frac{1}{n} \sum_{i=1}^{n}|y_i-x_i|$$

\vspace{0.5cm}

where $y_i$ is the prediction (pipeline's result), $x_i$ the true value (ground truth respiration rate) and $n$ sample size.

\subsection {Mean absolute percentage error} \label{cap:mape}
Mean Absolute Percentage Error (MAPE) is the mean of all absolute percentage errors between the predicted and actual values.
MAPE is the average percentage difference between predictions and their intended targets in the database.
\vspace{0.5cm}

$$MAPE = \frac{100}{n} \sum_{i=1}^{n}\bigg | \frac{y_i-x_i}{x_i}\bigg |$$ 

\vspace{0.5cm}

where $y_i$ is the prediction (pipeline's result), $x_i$ the true value (ground truth respiration rate) and $n$ sample size.

 %\subsection{Root Mean Square Error (RMSE) }\label{cap:rmse}
 %Root Mean Squared Error (RMSE) is the square root of the mean squared error between the predicted and actual values.
 %RMSE is a weighted measure of model accuracy given on the same scale as the prediction target. It can be interpreted as the average error that the model’s predictions have in comparison with the actual, with extra weight added to larger prediction errors.
 
 %Abbreviations:
%\begin{itemize}  \item SGf = Savitzky–Golay filter \item resp rate = data extracted from Noxtural   \item toolbox = toolbox for analyzing respiratory recordings %\cite{Noto2018AutomatedToolbox} \end{itemize}




\clearpage
\section{Result for MODWTMRA} \label{cap:ResultMODWTRA}
This section of the result is divided into normal bed, section \ref{cap:ResultNormalBed1}, and rocking bed \ref{cap:ResultRockingBed1}. Inside both sections are presented the result for each position for the binary and weighted approach.
\subsection{Result Normal Bed}   \label{cap:ResultNormalBed1}
\input{Chapter/metrics/MOWDT_back_still.tex}


\subsubsection*{Position 1 corporation Weighted e binary}
\subsection{Result Rocking Bed}   \label{cap:ResultRockingBed1}


%\input{Chapter/metrics/result_back_still.tex}
\input{Chapter/metrics/result_back_still_metrics.tex}


\section{Back position with moving mattress}
\input{Chapter/metrics/result_back_mov.tex}
\input{Chapter/metrics/result_back_mov_metrics.tex}
\section{Left position with still mattress}
\input{Chapter/metrics/result_left_still.tex}
\input{Chapter/metrics/result_left_still_metrics.tex}

%\section{Left position with moving mattress}
\input{Chapter/metrics/result_left_mov.tex}
\input{Chapter/metrics/result_left_mov_metrics.tex}

%\section{Belly position with still mattress}
\input{Chapter/metrics/result_belly_still.tex}
\input{Chapter/metrics/result_belly_still_metrics.tex}

%\section{Belly position with moving mattress}
\input{Chapter/metrics/result_belly_mov.tex}
\input{Chapter/metrics/result_belly_mov_metrics.tex}

%\section{Right position with still mattress}
\input{Chapter/metrics/result_right_still.tex}
\input{Chapter/metrics/result_right_still_metrics.tex}

%\section{Right position with moving mattress}
\input{Chapter/metrics/result_right_mov.tex}
\input{Chapter/metrics/result_right_mov_metrics.tex}


\section{Comparison between the two approaches  (wavelet and SG filter)}
\section{Discussion performance on normal vs rocking bed }


%\missingfigure{sample text yolo}